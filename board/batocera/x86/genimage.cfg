image boot.vfat {
    vfat {
        extraargs = "-F 32 -n REGLINUX"
        @files
    }
    size = 4G
    mountpoint = "/"
}

image userdata.ext4 {
    ext4 {
        label = "SHARE"
        use-mke2fs = true
        extraargs = "-m 0"
    }
    size = 512M
    # include files from TARGET_DIR/userdata
    mountpoint = "/userdata"
}

image reglinux.img {
    hdimage {
        partition-table-type = "hybrid"
        align = 1M
    }
    
    partition boot {
        in-partition-table = false
        image = "../../boot_hybrid.img"
        offset = 0
        size = 512
        holes = {"(440; 512)"}
    }

    partition grub {
        in-partition-table = "no"
        image = "../../grub.img"
        offset = 17408
    }

    partition boot {
        in-partition-table = true
        bootable = true
        partition-type = 0xC
        partition-type-uuid = F
        image = "boot.vfat"
    }

    partition userdata {
        in-partition-table = true
        partition-type = 0x83
        partition-type-uuid = L
        image = "userdata.ext4"
    }
}
